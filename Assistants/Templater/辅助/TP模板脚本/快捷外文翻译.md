
<%*
try {
    // 彩云小译 API token
    const CAIYUN_TOKEN = '3975l6lr5pcbvidl6jl2'; 
// 这是测试用的Token（可能无法使用），请先注册彩云小译（下面的网址）并获取 Token.
//新用户注册会获得 100 万字的免费翻译额度,有效期一个月；如果您使用超过 100 万字，会按照 39元/100万字的费率收费
    if (!app.workspace.activeLeaf || !app.workspace.activeLeaf.view) {
        new Notice('请先切换到编辑模式');
        return;
    }
    if (!CAIYUN_TOKEN || CAIYUN_TOKEN.trim() === '') {
        new Notice('请先注册彩云小译并获取 Token\n\n请访问：https://platform.caiyunapp.com/regist\n\n获取后填入:快捷外文翻译.md', 8000);
        return;
    }
    await tp.user.Translator(tp, CAIYUN_TOKEN);
} catch (error) {
    new Notice(`翻译错误: ${error.message}`);
}
%>